{
  "host": {
    "logLevel": "info",
    "container": {
      "mode": "daemon",
      "privileged": true,
      "instanceId": ""
    },
    "metrics": {
      "port": 3001,
      "enabled": true
    },
    "dashboard": {
      "enabled": true,
      "port": 3002
    },
    "memory": {
      "embeddings": {
        "enabled": true
      }
    },
    "backgroundJobs": {
      "enabled": true,
      "maxConcurrent": 2,
      "maxRuntimeMs": 2400000,
      "progress": {
        "enabled": true,
        "startDelayMs": 30000,
        "intervalMs": 120000,
        "maxUpdates": 3
      },
      "autoSpawn": {
        "enabled": true,
        "foregroundTimeoutMs": 90000,
        "onTimeout": true,
        "onToolLimit": true,
        "classifier": {
          "enabled": true,
          "model": "openai/gpt-5-nano",
          "timeoutMs": 3000,
          "maxOutputTokens": 32,
          "temperature": 0,
          "confidenceThreshold": 0.6,
          "adaptive": {
            "enabled": true,
            "minThreshold": 0.55,
            "maxThreshold": 0.65,
            "queueDepthLow": 0,
            "queueDepthHigh": 4
          }
        }
      }
    },
    "routing": {
      "enabled": true,
      "maxFastChars": 200,
      "maxStandardChars": 1200,
      "backgroundMinChars": 2000,
      "fastKeywords": ["hi", "hello", "hey", "who are you", "what can you do", "help", "thanks", "thank you"],
      "deepKeywords": ["research", "analysis", "analyze", "report", "dashboard", "vibe", "refactor", "architecture", "design", "spec", "strategy", "migration", "benchmark", "investigate", "evaluate", "summarize", "long-running"],
      "backgroundKeywords": ["background", "long-running", "research", "deep dive", "multi-step", "multi step", "dashboard", "refactor", "benchmark", "report", "analysis", "survey", "crawl", "scrape", "codebase"],
      "classifierFallback": {
        "enabled": true,
        "minChars": 600
      },
      "plannerProbe": {
        "enabled": true,
        "model": "openai/gpt-5-nano",
        "timeoutMs": 3000,
        "maxOutputTokens": 120,
        "temperature": 0,
        "minChars": 700,
        "minSteps": 4,
        "minTools": 3
      },
      "profiles": {
        "fast": {
          "model": "openai/gpt-5-nano",
          "maxOutputTokens": 4096,
          "maxToolSteps": 6,
          "recallMaxResults": 0,
          "recallMaxTokens": 0,
          "enablePlanner": false,
          "enableValidation": false,
          "responseValidationMaxRetries": 0,
          "enableMemoryRecall": false,
          "enableMemoryExtraction": false,
          "progress": { "enabled": false }
        },
        "standard": {
          "model": "openai/gpt-5-mini",
          "maxOutputTokens": 4096,
          "maxToolSteps": 16,
          "recallMaxResults": 6,
          "recallMaxTokens": 1500,
          "enablePlanner": true,
          "enableValidation": true,
          "responseValidationMaxRetries": 1,
          "enableMemoryRecall": true,
          "enableMemoryExtraction": true
        },
        "deep": {
          "model": "moonshotai/kimi-k2.5",
          "maxOutputTokens": 4096,
          "maxToolSteps": 32,
          "recallMaxResults": 12,
          "recallMaxTokens": 2500,
          "enablePlanner": true,
          "enableValidation": true,
          "responseValidationMaxRetries": 2,
          "enableMemoryRecall": true,
          "enableMemoryExtraction": true
        },
        "background": {
          "model": "moonshotai/kimi-k2.5",
          "maxOutputTokens": 4096,
          "maxToolSteps": 64,
          "recallMaxResults": 16,
          "recallMaxTokens": 4000,
          "enablePlanner": true,
          "enableValidation": true,
          "responseValidationMaxRetries": 2,
          "enableMemoryRecall": true,
          "enableMemoryExtraction": true,
          "progress": { "enabled": true, "initialMs": 15000, "intervalMs": 60000, "maxUpdates": 3 }
        }
      }
    }
  },
  "agent": {
    "assistantName": "Rain",
    "promptPacks": {
      "enabled": true
    },
    "planner": {
      "enabled": true,
      "mode": "auto"
    },
    "responseValidation": {
      "enabled": true,
      "minPromptTokens": 400,
      "minResponseTokens": 160
    },
    "tools": {
      "progress": {
        "enabled": true,
        "minIntervalMs": 30000,
        "notifyTools": ["WebSearch", "WebFetch", "Bash", "GitClone", "NpmInstall"],
        "notifyOnStart": true,
        "notifyOnError": true
      }
    }
  }
}
